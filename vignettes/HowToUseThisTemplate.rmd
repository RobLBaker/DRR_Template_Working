---
title: "HowToUse"
author: "Joe DeVivo"
date: "4/23/2020"
output:
  html_document:
    df_print: kable
    fig_caption: true
    dev: svg
    highlight: haddock
    keep_md: no
    smart: no
    theme: journal
    css: "../common/journalnps.min.css"
    toc: yes
    toc_float: true
    number_sections: true
---

```{r setup, include=FALSE}
RRpackages <- c('markdown',     # links to Sundown rendering library
                'rmarkdown',    # newer rendering via pandoc
                'knitr',
                'kableExtra',
                'yaml'         # format data into markdown
                 )

inst <- RRpackages %in% installed.packages()
if (length(RRpackages[!inst]) > 0) {
   install.packages(RRpackages[!inst], dep = TRUE)
}
lapply(RRpackages, library, character.only = TRUE)

knitr::opts_chunk$set(
   echo = TRUE,
   comment = " ",
   dev = "svg",
   tidy.opts = list(width.cutoff = 60),
   tidy = TRUE
   )
```

# Overview
Data Release Reports (DRRs) are created by the National Park Service and provide detailed descriptions of valuable research datasets, including the methods used to collect the data and technical analyses supporting the quality of the measurements. Data Release Reports focus on helping others reuse data, rather than presenting results, testing hypotheses, or presenting new interpretations, methods or in-depth analyses. 

Data Release Reports are intended to document the processing of fully-QAed data to their final (QCed) form in a reproducible and transparent manner. Data Release Reports document the data collection methods, quality standards, and processing code used to prepare and review data prior to release, and present the quality of resultant data in the context of fitness for their intended use. 

Each DRR cites source and resultant datasets that are published concurrently and cross-referenced. Associated datasets are made publicly available with the exception of data that must be protected from release as per NPS and park-specific policies.



# Project Set-up


## Required Packages Not on CRAN

EMLassemblyline

## Additional Useful Packages

DSTools
IMDQC

## Folder Structure


# Creating a Reproducible Report


## YAML Header Information


## Rmarkdown Startup Code Chunk


## Figures
Figures should be inserted using code chunks in all cases so that figure
settings can be set in the chunk header. The chunk header should at a minimum
set the fig.align parameter to “center” and the specify the figure caption
(fig.cap parameter). Inserting figures this way will ensure that the caption is
properly formatted and it will apply copy the caption to the figure’s “alt text”
tag, making it 508-compliant.

For example:

````markdown
`r ''````{r figure1, echo=FALSE, fig.align="center", fig.cap="**Figure 1.** Example general workflow to include in the methods section."}
include_graphics("ProcessingWorkflow.png")
```
````

Results in:

```{r figure1, echo=FALSE, fig.align="center", fig.cap="**Figure 1.** Example general workflow to include in the methods section."}
include_graphics("ProcessingWorkflow.png")

```

## Tables
Tables should be created using the kable function, with additional formatting
options available via the kableExtra package. Specifying the caption in the
kable function call (as opposed to inline markdown text) will ensure that the
caption is appropriately formatted using the theme stylesheet. The table format
has been designed to mimic the NPS graphic identity standards.

In general, tables should be created with the bootstrap_options of striped,
hover, condensed, and responsive, with full_width set to false.

For example:

````markdown
`r ''````{r Table1, echo=FALSE}
c1<-c("Mouse1","Mouse2","Mousen")
c2<-c("Drug treatment","Drug treatment","Drug treatment")
c3<-c("Liver dissection","Liver dissection","Liver dissection")
c4<-c("RNA extraction","RNA extraction","RNA extraction")
c5<-c("RNA-Seq","RNA-Seq","RNA-Seq")
c6<-c("GEOXXXXX","GEOXXXXX","GEOXXXXX")
Table1<-data.frame(c1,c2,c3,c4,c5,c6)

kable(Table1, 
      col.names=c("Subjects","Protocol 1","Protocol 2","Protocol 3","Protocol 4","Data"),
      caption="**Table 1.** Experimental study example Data Records table.") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"),full_width=F)
```
````
Results in:

```{r Table1, echo=FALSE}
c1<-c("Mouse1","Mouse2","Mousen")
c2<-c("Drug treatment","Drug treatment","Drug treatment")
c3<-c("Liver dissection","Liver dissection","Liver dissection")
c4<-c("RNA extraction","RNA extraction","RNA extraction")
c5<-c("RNA-Seq","RNA-Seq","RNA-Seq")
c6<-c("GEOXXXXX","GEOXXXXX","GEOXXXXX")
Table1<-data.frame(c1,c2,c3,c4,c5,c6)

kable(Table1, 
      col.names=c("Subjects","Protocol 1","Protocol 2","Protocol 3","Protocol 4","Data"),
      caption="**Table 1.** Experimental study example Data Records table.") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"),full_width=F)
```
Note that rendered tables are not fully 508 compliant, but they’re close. We are
currently working on extending (or contributing to) the kable package so that
rendered tables are 508 compliant.

# Creating Data Packages


# Publislhing Data Release Reports and Associated Data

## Acquiring Report Numbers
Because data release reports 

## Report Review Requirements
DRRs serve as the documentation of the technical review process (and standards) for published datasets. Prior to publication, DRRs reports and accompanying datasets should be reviewed to ensure accuracy, completeness, and consistency with documented data quality standards, as well as for usability and reproducibility. Typically they do not need to be peer reviewed, but should be appropriately reviewed prior to publication. In particular it's imperative to ensure that any summary statistics about associated data packages are correct, and all fields, codes, values, etc., are consistently used and defned among the report, data packages, and metadata. Data Release Reports should always be checked to ensure that they do not contain data that should be protected from release and/or that they identify data packages that contain such data.

## Data Package Review Requirements
Prior to approval of a data release report, all data packages should undergo a technical and usability review. At a minimum, 

## Publishing Draft Data Packages

# Appendix A. Using this template with Reports Created in Microsoft Word.

